<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <title>Document</title>
    <style>
        .modal span {
            color: red;
            font-size: 12px;
            text-transform: inherit;
        }
    </style>
</head>

<body>
    <div>
        <div class=" d-flex justify-content-center" style="height: 400px; overflow: hidden;">
            <img src="./website.png" alt class="img-thumbnail w-100">
        </div>
        <div class="list-unstyled d-flex p-3 nav-item d-flex">
            <li href="" class="nav-link ">Trang chủ</li>
            <li href="" id="open" class="nav-link" style="padding: 0 20px; cursor: pointer;">Đăng kí</li>
        </div>
        <div class="p-3 ">
            <h2>DANH SÁCH THÀNH VIÊN</h2>
            <table class="table table-bordered">
                <thead class="">
                    <td>STT</td>
                    <td>Họ và tên</td>
                    <td>Giới tính</td>
                    <td>Số điện thoại</td>
                    <td>Ngày tham gia</td>
                    <td>Địa chỉ</td>
                    <td>Khóa học</td>
                    <td>Học phí</td>
                </thead>
            </table>
        </div>

    </div>
    <div class="modal  bg-light shadow-lg p-2" id="modal" style="height: 90vh; width: 60vw;position: absolute;left: 50%;top:50%;transform: translate(-50%,-50%);">
        <div class="modal-header d-flex align-items-center justify-content-between">
            <div></div>
            <div class="modal-title">
                <P style="font-size: 24px;">THÔNG TIN HỌC VIÊN</h2>

            </div>
            <button class="btn btn-success " type="button" data-dismiss=" modal " id="close" aria-label="Close ">
                <span aria-hidden="true " class="text-white">&times;</span>
            </button>
        </div>
        <div class="p-3 d-flex flex-column" style="row-gap: 15px;">
            <div class="form-group">

                <div class="row">
                    <label for="" class="col-2"> <b>Họ và tên</b></label>
                    <div class="col-10 d-flex flex-column">
                        <input type="text" id="ten" class="form-control">
                        <span class="err-ten">*</span>
                    </div>
                </div>

            </div>
            <div>
                <div class="row">
                    <label for class="col-2">
                    <b>Số điện thoại</b>
                    </label>
                    <div class="col-10 d-flex flex-column">
                        <input type="text" id="sdt" class="form-control">
                        <span class="err-sdt">*</span>
                    </div>
                </div>


            </div>
            <div>
                <div class="row">
                    <label for class="col-2">
                    <b>Ngày tham gia</b>
                </label>
                    <div class="col-10 d-flex flex-column">
                        <input type="date" id="date" class="form-control">
                        <span class="err-date">*</span>
                    </div>

                </div>


            </div>
            <div>
                <div class="row">
                    <label for class="col-2">
                        <b>Địa chỉ</b>
                    </label>
                    <div class="col-10 d-flex flex-column">
                        <input type="text" id="diachi" class="form-control">
                    </div>

                </div>


            </div>
            <div class="row">
                <label for="gioiTinh" class="col-2">
                    <b>Giới tính</b>
                </label>
                <div class="col-10">
                    <input type="radio" id="rNam" name="gioiTinh" checked>Nam
                    <input type="radio" id="rNu" name="gioiTinh">Nu
                </div>


            </div>
            <div class="row">
                <label for class="col-2">
                    <b>Bạn muốn tham gia khóa nào ?</b>
                </label>
                <div class="col-10">
                    <select id="khoahoc" onchange="changeHocPhi() " class="form-select">
                        <option value="2 tuần">2 tuần</option>
                        <option value="4 tuần">4 tuần</option>
                        <option value="6 tuần">6 tuần</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <label class="col-2">
                    <b>Học phí</b>
                </label>
                <div class="col-10">
                    <input class="form-control" type="text" readonly id="hocphi" value="5,000,000">
                </div>
            </div>
        </div>
        <div class="modal-fo">
            <button id="submit" class="btn btn-success container">Lưu</button>

        </div>

    </div>
</body>
<script>
    const open = document.querySelector("#open");
    const close = document.querySelector("#close");
    const modal = document.querySelector("#modal");
    const submit = document.querySelector("#submit");
    const khoaHoc = document.getElementById("khoahoc");
    const hocphiElement = document.getElementById("hocphi");
    const erTen = document.querySelector(".err-ten");
    const erSdt = document.querySelector(".err-sdt");
    const erDate = document.querySelector(".err-date");





    var stt = 0;

    var tien = "";
    var table = document.querySelector("table");

    function changeHocPhi() {
        if (khoaHoc != " ") {
            switch (khoaHoc.value) {
                case "2 tuần":
                    tien = "5,000,000";
                    break;
                case "4 tuần":
                    tien = "8,000,000";
                    break;
                case "6 tuần":
                    tien = "9,000,000";
                    break;
                default:
                    tien = "0"
            }
            hocphi.value = tien;
        } else {
            alert("Vui lòng lựa chọn khóa học!! ")
        }
    }

    //open modal
    open.addEventListener("click", function() {
        modal.style.display = "block";
    });
    //close modal
    close.addEventListener("click", function() {
        modal.style.display = "none ";
    });

    //khi click submit
    submit.addEventListener("click", function(e) {
        e.preventDefault()
        const ten = document.getElementById("ten").value;
        const ngay = document.getElementById("date").value;
        const sdt = document.getElementById("sdt").value;
        const diachi = document.getElementById("diachi").value;
        const nam = document.getElementById("rNam");
        const nu = document.getElementById("rNu");
        var gt = nam.checked ? "Nam" : "Nữ";
        let regexName = /^[A-Z][a-z]+(\s+[A-Z][a-z]+)*$/

        // ẩn span
        function hideElement(element) {
            element.innerHTML = " ";
            element.classList.add("none");
        }
        //show span
        function showElement(element, message) {
            element.innerHTML = message;
            element.classList.remove("none");
        }
        if (ten === "" || sdt === "" || ngay === "") {
            alert("Vui lòng điền đầy đủ thông tin!")
            if (ten === "") {
                showElement(erTen, "Vui lòng nhập tên!! ");
            } else if (!regexName.test(ten)) {
                showElement(erTen, "Tên không đúng định dạng (VD:Nguyen Van A)! ");
            } else {
                hideElement(erTen);
            }

            if (sdt === "") {
                showElement(erSdt, "Vui lòng nhập số điện thoại!! ");
            } else if (sdt.length != 10) {
                showElement(erSdt, "Số điện thoại phải có 10 số!! ");
            } else if (!(/^\d{3}-\d{6}$/)) {
                showElement(erSdt, "Số điện thoại sai định dạng (XXX-YYYYYY) !!");
            } else {
                hideElement(erSdt);
            }

            if (ngay === "") {
                showElement(erDate, "Vui lòng điền ngày tham gia!! ");
            } else {
                hideElement(erDate);
            }
            if (khoaHoc.value === "") {
                alert("Vui lòng chọn khóa học!! ");
            }

        } else {
            stt++
            let html = `
                <tr>
                    <td>${stt}</td>
                    <td>${ten}</td>
                    <td>${gt}</td>
                    <td>${sdt}</td>
                    <td>${ngay}</td>
                    <td>${diachi}</td>
                    <td>${khoaHoc.value}</td>
                    <td>${hocphi.value}</td>
                </tr>`;

            let row = table.insertRow();
            row.innerHTML = html;
            modal.style.display = "none";
        }
    });
</script>

</html>